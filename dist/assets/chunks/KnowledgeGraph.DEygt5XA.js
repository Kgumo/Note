import{_ as Tt,c as ot,o as at,j as Z,e as kt,t as vt,af as Nt,ag as Et,p as Q,v as At,$ as jt,q as Dt}from"./framework.C8Xs1bna.js";import{d as $,b8 as ht,b9 as St,ba as _t,bb as ut,bc as st}from"../app.ByXXLBEE.js";import{o as It}from"./ordinal.BYWQX77i.js";import"./theme.DIbZucAt.js";import"./init.Gi6I4Gst.js";function Pt(t){let e;for(;e=t.sourceEvent;)t=e;return t}function H(t,e){if(t=Pt(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){var c=e.getBoundingClientRect();return[t.clientX-c.left-e.clientLeft,t.clientY-c.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ct={passive:!1},et={capture:!0,passive:!1};function lt(t){t.stopImmediatePropagation()}function J(t){t.preventDefault(),t.stopImmediatePropagation()}function bt(t){var e=t.document.documentElement,n=$(t).on("dragstart.drag",J,et);"onselectstart"in e?n.on("selectstart.drag",J,et):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function zt(t,e){var n=t.document.documentElement,o=$(t).on("dragstart.drag",null);e&&(o.on("click.drag",J,et),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const nt=t=>()=>t;function ft(t,{sourceEvent:e,subject:n,target:o,identifier:c,active:u,x:a,y:m,dx:y,dy:l,dispatch:x}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:y,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:x}})}ft.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Vt(t){return!t.ctrlKey&&!t.button}function Bt(){return this.parentNode}function Yt(t,e){return e??{x:t.x,y:t.y}}function Xt(){return navigator.maxTouchPoints||"ontouchstart"in this}function $t(){var t=Vt,e=Bt,n=Yt,o=Xt,c={},u=ht("start","drag","end"),a=0,m,y,l,x,k=0;function p(i){i.on("mousedown.drag",v).filter(o).on("touchstart.drag",f).on("touchmove.drag",s,Ct).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(i,M){if(!(x||!t.call(this,i,M))){var E=N(this,e.call(this,i,M),i,M,"mouse");E&&($(i.view).on("mousemove.drag",b,et).on("mouseup.drag",d,et),bt(i.view),lt(i),l=!1,m=i.clientX,y=i.clientY,E("start",i))}}function b(i){if(J(i),!l){var M=i.clientX-m,E=i.clientY-y;l=M*M+E*E>k}c.mouse("drag",i)}function d(i){$(i.view).on("mousemove.drag mouseup.drag",null),zt(i.view,l),J(i),c.mouse("end",i)}function f(i,M){if(t.call(this,i,M)){var E=i.changedTouches,j=e.call(this,i,M),I=E.length,_,T;for(_=0;_<I;++_)(T=N(this,j,i,M,E[_].identifier,E[_]))&&(lt(i),T("start",i,E[_]))}}function s(i){var M=i.changedTouches,E=M.length,j,I;for(j=0;j<E;++j)(I=c[M[j].identifier])&&(J(i),I("drag",i,M[j]))}function w(i){var M=i.changedTouches,E=M.length,j,I;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),j=0;j<E;++j)(I=c[M[j].identifier])&&(lt(i),I("end",i,M[j]))}function N(i,M,E,j,I,_){var T=u.copy(),P=H(_||E,M),X,B,r;if((r=n.call(i,new ft("beforestart",{sourceEvent:E,target:p,identifier:I,active:a,x:P[0],y:P[1],dx:0,dy:0,dispatch:T}),j))!=null)return X=r.x-P[0]||0,B=r.y-P[1]||0,function h(g,z,A){var D=P,S;switch(g){case"start":c[I]=h,S=a++;break;case"end":delete c[I],--a;case"drag":P=H(A||z,M),S=a;break}T.call(g,i,new ft(g,{sourceEvent:z,subject:r,target:p,identifier:I,active:S,x:P[0]+X,y:P[1]+B,dx:P[0]-D[0],dy:P[1]-D[1],dispatch:T}),j)}}return p.filter=function(i){return arguments.length?(t=typeof i=="function"?i:nt(!!i),p):t},p.container=function(i){return arguments.length?(e=typeof i=="function"?i:nt(i),p):e},p.subject=function(i){return arguments.length?(n=typeof i=="function"?i:nt(i),p):n},p.touchable=function(i){return arguments.length?(o=typeof i=="function"?i:nt(!!i),p):o},p.on=function(){var i=u.on.apply(u,arguments);return i===u?p:i},p.clickDistance=function(i){return arguments.length?(k=(i=+i)*i,p):Math.sqrt(k)},p}var Gt=1e-12;function mt(t){return((t=Math.exp(t))+1/t)/2}function Rt(t){return((t=Math.exp(t))-1/t)/2}function Lt(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ft=function t(e,n,o){function c(u,a){var m=u[0],y=u[1],l=u[2],x=a[0],k=a[1],p=a[2],v=x-m,b=k-y,d=v*v+b*b,f,s;if(d<Gt)s=Math.log(p/l)/e,f=function(j){return[m+j*v,y+j*b,l*Math.exp(e*j*s)]};else{var w=Math.sqrt(d),N=(p*p-l*l+o*d)/(2*l*n*w),i=(p*p-l*l-o*d)/(2*p*n*w),M=Math.log(Math.sqrt(N*N+1)-N),E=Math.log(Math.sqrt(i*i+1)-i);s=(E-M)/e,f=function(j){var I=j*s,_=mt(M),T=l/(n*w)*(_*Lt(e*I+M)-Rt(M));return[m+T*v,y+T*b,l*_/mt(e*I+M)]}}return f.duration=s*1e3*e/Math.SQRT2,f}return c.rho=function(u){var a=Math.max(.001,+u),m=a*a,y=m*m;return t(a,m,y)},c}(Math.SQRT2,2,4);function Kt(t,e){var n,o=1;t==null&&(t=0),e==null&&(e=0);function c(){var u,a=n.length,m,y=0,l=0;for(u=0;u<a;++u)m=n[u],y+=m.x,l+=m.y;for(y=(y/a-t)*o,l=(l/a-e)*o,u=0;u<a;++u)m=n[u],m.x-=y,m.y-=l}return c.initialize=function(u){n=u},c.x=function(u){return arguments.length?(t=+u,c):t},c.y=function(u){return arguments.length?(e=+u,c):e},c.strength=function(u){return arguments.length?(o=+u,c):o},c}function Qt(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Mt(this.cover(e,n),e,n,t)}function Mt(t,e,n,o){if(isNaN(e)||isNaN(n))return t;var c,u=t._root,a={data:o},m=t._x0,y=t._y0,l=t._x1,x=t._y1,k,p,v,b,d,f,s,w;if(!u)return t._root=a,t;for(;u.length;)if((d=e>=(k=(m+l)/2))?m=k:l=k,(f=n>=(p=(y+x)/2))?y=p:x=p,c=u,!(u=u[s=f<<1|d]))return c[s]=a,t;if(v=+t._x.call(null,u.data),b=+t._y.call(null,u.data),e===v&&n===b)return a.next=u,c?c[s]=a:t._root=a,t;do c=c?c[s]=new Array(4):t._root=new Array(4),(d=e>=(k=(m+l)/2))?m=k:l=k,(f=n>=(p=(y+x)/2))?y=p:x=p;while((s=f<<1|d)===(w=(b>=p)<<1|v>=k));return c[w]=u,c[s]=a,t}function Ut(t){var e,n,o=t.length,c,u,a=new Array(o),m=new Array(o),y=1/0,l=1/0,x=-1/0,k=-1/0;for(n=0;n<o;++n)isNaN(c=+this._x.call(null,e=t[n]))||isNaN(u=+this._y.call(null,e))||(a[n]=c,m[n]=u,c<y&&(y=c),c>x&&(x=c),u<l&&(l=u),u>k&&(k=u));if(y>x||l>k)return this;for(this.cover(y,l).cover(x,k),n=0;n<o;++n)Mt(this,a[n],m[n],t[n]);return this}function qt(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,o=this._y0,c=this._x1,u=this._y1;if(isNaN(n))c=(n=Math.floor(t))+1,u=(o=Math.floor(e))+1;else{for(var a=c-n||1,m=this._root,y,l;n>t||t>=c||o>e||e>=u;)switch(l=(e<o)<<1|t<n,y=new Array(4),y[l]=m,m=y,a*=2,l){case 0:c=n+a,u=o+a;break;case 1:n=c-a,u=o+a;break;case 2:c=n+a,o=u-a;break;case 3:n=c-a,o=u-a;break}this._root&&this._root.length&&(this._root=m)}return this._x0=n,this._y0=o,this._x1=c,this._y1=u,this}function Ht(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Wt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function G(t,e,n,o,c){this.node=t,this.x0=e,this.y0=n,this.x1=o,this.y1=c}function Ot(t,e,n){var o,c=this._x0,u=this._y0,a,m,y,l,x=this._x1,k=this._y1,p=[],v=this._root,b,d;for(v&&p.push(new G(v,c,u,x,k)),n==null?n=1/0:(c=t-n,u=e-n,x=t+n,k=e+n,n*=n);b=p.pop();)if(!(!(v=b.node)||(a=b.x0)>x||(m=b.y0)>k||(y=b.x1)<c||(l=b.y1)<u))if(v.length){var f=(a+y)/2,s=(m+l)/2;p.push(new G(v[3],f,s,y,l),new G(v[2],a,s,f,l),new G(v[1],f,m,y,s),new G(v[0],a,m,f,s)),(d=(e>=s)<<1|t>=f)&&(b=p[p.length-1],p[p.length-1]=p[p.length-1-d],p[p.length-1-d]=b)}else{var w=t-+this._x.call(null,v.data),N=e-+this._y.call(null,v.data),i=w*w+N*N;if(i<n){var M=Math.sqrt(n=i);c=t-M,u=e-M,x=t+M,k=e+M,o=v.data}}return o}function Zt(t){if(isNaN(x=+this._x.call(null,t))||isNaN(k=+this._y.call(null,t)))return this;var e,n=this._root,o,c,u,a=this._x0,m=this._y0,y=this._x1,l=this._y1,x,k,p,v,b,d,f,s;if(!n)return this;if(n.length)for(;;){if((b=x>=(p=(a+y)/2))?a=p:y=p,(d=k>=(v=(m+l)/2))?m=v:l=v,e=n,!(n=n[f=d<<1|b]))return this;if(!n.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(o=e,s=f)}for(;n.data!==t;)if(c=n,!(n=n.next))return this;return(u=n.next)&&delete n.next,c?(u?c.next=u:delete c.next,this):e?(u?e[f]=u:delete e[f],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(o?o[s]=n:this._root=n),this):(this._root=u,this)}function Jt(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function te(){return this._root}function ee(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function ne(t){var e=[],n,o=this._root,c,u,a,m,y;for(o&&e.push(new G(o,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(o=n.node,u=n.x0,a=n.y0,m=n.x1,y=n.y1)&&o.length){var l=(u+m)/2,x=(a+y)/2;(c=o[3])&&e.push(new G(c,l,x,m,y)),(c=o[2])&&e.push(new G(c,u,x,l,y)),(c=o[1])&&e.push(new G(c,l,a,m,x)),(c=o[0])&&e.push(new G(c,u,a,l,x))}return this}function re(t){var e=[],n=[],o;for(this._root&&e.push(new G(this._root,this._x0,this._y0,this._x1,this._y1));o=e.pop();){var c=o.node;if(c.length){var u,a=o.x0,m=o.y0,y=o.x1,l=o.y1,x=(a+y)/2,k=(m+l)/2;(u=c[0])&&e.push(new G(u,a,m,x,k)),(u=c[1])&&e.push(new G(u,x,m,y,k)),(u=c[2])&&e.push(new G(u,a,k,x,l)),(u=c[3])&&e.push(new G(u,x,k,y,l))}n.push(o)}for(;o=n.pop();)t(o.node,o.x0,o.y0,o.x1,o.y1);return this}function ie(t){return t[0]}function oe(t){return arguments.length?(this._x=t,this):this._x}function ae(t){return t[1]}function ue(t){return arguments.length?(this._y=t,this):this._y}function gt(t,e,n){var o=new dt(e??ie,n??ae,NaN,NaN,NaN,NaN);return t==null?o:o.addAll(t)}function dt(t,e,n,o,c,u){this._x=t,this._y=e,this._x0=n,this._y0=o,this._x1=c,this._y1=u,this._root=void 0}function pt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var R=gt.prototype=dt.prototype;R.copy=function(){var t=new dt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,o;if(!e)return t;if(!e.length)return t._root=pt(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var c=0;c<4;++c)(o=e.source[c])&&(o.length?n.push({source:o,target:e.target[c]=new Array(4)}):e.target[c]=pt(o));return t};R.add=Qt;R.addAll=Ut;R.cover=qt;R.data=Ht;R.extent=Wt;R.find=Ot;R.remove=Zt;R.removeAll=Jt;R.root=te;R.size=ee;R.visit=ne;R.visitAfter=re;R.x=oe;R.y=ue;function O(t){return function(){return t}}function W(t){return(t()-.5)*1e-6}function se(t){return t.x+t.vx}function le(t){return t.y+t.vy}function ce(t){var e,n,o,c=1,u=1;typeof t!="function"&&(t=O(t==null?1:+t));function a(){for(var l,x=e.length,k,p,v,b,d,f,s=0;s<u;++s)for(k=gt(e,se,le).visitAfter(m),l=0;l<x;++l)p=e[l],d=n[p.index],f=d*d,v=p.x+p.vx,b=p.y+p.vy,k.visit(w);function w(N,i,M,E,j){var I=N.data,_=N.r,T=d+_;if(I){if(I.index>p.index){var P=v-I.x-I.vx,X=b-I.y-I.vy,B=P*P+X*X;B<T*T&&(P===0&&(P=W(o),B+=P*P),X===0&&(X=W(o),B+=X*X),B=(T-(B=Math.sqrt(B)))/B*c,p.vx+=(P*=B)*(T=(_*=_)/(f+_)),p.vy+=(X*=B)*T,I.vx-=P*(T=1-T),I.vy-=X*T)}return}return i>v+T||E<v-T||M>b+T||j<b-T}}function m(l){if(l.data)return l.r=n[l.data.index];for(var x=l.r=0;x<4;++x)l[x]&&l[x].r>l.r&&(l.r=l[x].r)}function y(){if(e){var l,x=e.length,k;for(n=new Array(x),l=0;l<x;++l)k=e[l],n[k.index]=+t(k,l,e)}}return a.initialize=function(l,x){e=l,o=x,y()},a.iterations=function(l){return arguments.length?(u=+l,a):u},a.strength=function(l){return arguments.length?(c=+l,a):c},a.radius=function(l){return arguments.length?(t=typeof l=="function"?l:O(+l),y(),a):t},a}function fe(t){return t.index}function yt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function he(t){var e=fe,n=k,o,c=O(30),u,a,m,y,l,x=1;t==null&&(t=[]);function k(f){return 1/Math.min(m[f.source.index],m[f.target.index])}function p(f){for(var s=0,w=t.length;s<x;++s)for(var N=0,i,M,E,j,I,_,T;N<w;++N)i=t[N],M=i.source,E=i.target,j=E.x+E.vx-M.x-M.vx||W(l),I=E.y+E.vy-M.y-M.vy||W(l),_=Math.sqrt(j*j+I*I),_=(_-u[N])/_*f*o[N],j*=_,I*=_,E.vx-=j*(T=y[N]),E.vy-=I*T,M.vx+=j*(T=1-T),M.vy+=I*T}function v(){if(a){var f,s=a.length,w=t.length,N=new Map(a.map((M,E)=>[e(M,E,a),M])),i;for(f=0,m=new Array(s);f<w;++f)i=t[f],i.index=f,typeof i.source!="object"&&(i.source=yt(N,i.source)),typeof i.target!="object"&&(i.target=yt(N,i.target)),m[i.source.index]=(m[i.source.index]||0)+1,m[i.target.index]=(m[i.target.index]||0)+1;for(f=0,y=new Array(w);f<w;++f)i=t[f],y[f]=m[i.source.index]/(m[i.source.index]+m[i.target.index]);o=new Array(w),b(),u=new Array(w),d()}}function b(){if(a)for(var f=0,s=t.length;f<s;++f)o[f]=+n(t[f],f,t)}function d(){if(a)for(var f=0,s=t.length;f<s;++f)u[f]=+c(t[f],f,t)}return p.initialize=function(f,s){a=f,l=s,v()},p.links=function(f){return arguments.length?(t=f,v(),p):t},p.id=function(f){return arguments.length?(e=f,p):e},p.iterations=function(f){return arguments.length?(x=+f,p):x},p.strength=function(f){return arguments.length?(n=typeof f=="function"?f:O(+f),b(),p):n},p.distance=function(f){return arguments.length?(c=typeof f=="function"?f:O(+f),d(),p):c},p}const ge=1664525,de=1013904223,xt=4294967296;function ve(){let t=1;return()=>(t=(ge*t+de)%xt)/xt}function me(t){return t.x}function pe(t){return t.y}var ye=10,xe=Math.PI*(3-Math.sqrt(5));function we(t){var e,n=1,o=.001,c=1-Math.pow(o,1/300),u=0,a=.6,m=new Map,y=St(k),l=ht("tick","end"),x=ve();t==null&&(t=[]);function k(){p(),l.call("tick",e),n<o&&(y.stop(),l.call("end",e))}function p(d){var f,s=t.length,w;d===void 0&&(d=1);for(var N=0;N<d;++N)for(n+=(u-n)*c,m.forEach(function(i){i(n)}),f=0;f<s;++f)w=t[f],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return e}function v(){for(var d=0,f=t.length,s;d<f;++d){if(s=t[d],s.index=d,s.fx!=null&&(s.x=s.fx),s.fy!=null&&(s.y=s.fy),isNaN(s.x)||isNaN(s.y)){var w=ye*Math.sqrt(.5+d),N=d*xe;s.x=w*Math.cos(N),s.y=w*Math.sin(N)}(isNaN(s.vx)||isNaN(s.vy))&&(s.vx=s.vy=0)}}function b(d){return d.initialize&&d.initialize(t,x),d}return v(),e={tick:p,restart:function(){return y.restart(k),e},stop:function(){return y.stop(),e},nodes:function(d){return arguments.length?(t=d,v(),m.forEach(b),e):t},alpha:function(d){return arguments.length?(n=+d,e):n},alphaMin:function(d){return arguments.length?(o=+d,e):o},alphaDecay:function(d){return arguments.length?(c=+d,e):+c},alphaTarget:function(d){return arguments.length?(u=+d,e):u},velocityDecay:function(d){return arguments.length?(a=1-d,e):1-a},randomSource:function(d){return arguments.length?(x=d,m.forEach(b),e):x},force:function(d,f){return arguments.length>1?(f==null?m.delete(d):m.set(d,b(f)),e):m.get(d)},find:function(d,f,s){var w=0,N=t.length,i,M,E,j,I;for(s==null?s=1/0:s*=s,w=0;w<N;++w)j=t[w],i=d-j.x,M=f-j.y,E=i*i+M*M,E<s&&(I=j,s=E);return I},on:function(d,f){return arguments.length>1?(l.on(d,f),e):l.on(d)}}}function _e(){var t,e,n,o,c=O(-30),u,a=1,m=1/0,y=.81;function l(v){var b,d=t.length,f=gt(t,me,pe).visitAfter(k);for(o=v,b=0;b<d;++b)e=t[b],f.visit(p)}function x(){if(t){var v,b=t.length,d;for(u=new Array(b),v=0;v<b;++v)d=t[v],u[d.index]=+c(d,v,t)}}function k(v){var b=0,d,f,s=0,w,N,i;if(v.length){for(w=N=i=0;i<4;++i)(d=v[i])&&(f=Math.abs(d.value))&&(b+=d.value,s+=f,w+=f*d.x,N+=f*d.y);v.x=w/s,v.y=N/s}else{d=v,d.x=d.data.x,d.y=d.data.y;do b+=u[d.data.index];while(d=d.next)}v.value=b}function p(v,b,d,f){if(!v.value)return!0;var s=v.x-e.x,w=v.y-e.y,N=f-b,i=s*s+w*w;if(N*N/y<i)return i<m&&(s===0&&(s=W(n),i+=s*s),w===0&&(w=W(n),i+=w*w),i<a&&(i=Math.sqrt(a*i)),e.vx+=s*v.value*o/i,e.vy+=w*v.value*o/i),!0;if(v.length||i>=m)return;(v.data!==e||v.next)&&(s===0&&(s=W(n),i+=s*s),w===0&&(w=W(n),i+=w*w),i<a&&(i=Math.sqrt(a*i)));do v.data!==e&&(N=u[v.data.index]*o/i,e.vx+=s*N,e.vy+=w*N);while(v=v.next)}return l.initialize=function(v,b){t=v,n=b,x()},l.strength=function(v){return arguments.length?(c=typeof v=="function"?v:O(+v),x(),l):c},l.distanceMin=function(v){return arguments.length?(a=v*v,l):Math.sqrt(a)},l.distanceMax=function(v){return arguments.length?(m=v*v,l):Math.sqrt(m)},l.theta=function(v){return arguments.length?(y=v*v,l):Math.sqrt(y)},l}const rt=t=>()=>t;function be(t,{sourceEvent:e,target:n,transform:o,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:c}})}function ct(t){t.stopImmediatePropagation()}function tt(t){t.preventDefault(),t.stopImmediatePropagation()}function ze(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Me(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function wt(){return this.__zoom||_t}function Te(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ke(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ne(t,e,n){var o=t.invertX(e[0][0])-n[0][0],c=t.invertX(e[1][0])-n[1][0],u=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(c>o?(o+c)/2:Math.min(0,o)||Math.max(0,c),a>u?(u+a)/2:Math.min(0,u)||Math.max(0,a))}function Ee(){var t=ze,e=Me,n=Ne,o=Te,c=ke,u=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],m=250,y=Ft,l=ht("start","zoom","end"),x,k,p,v=500,b=150,d=0,f=10;function s(r){r.property("__zoom",wt).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",T).filter(c).on("touchstart.zoom",P).on("touchmove.zoom",X).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.transform=function(r,h,g,z){var A=r.selection?r.selection():r;A.property("__zoom",wt),r!==A?M(r,h,g,z):A.interrupt().each(function(){E(this,arguments).event(z).start().zoom(null,typeof h=="function"?h.apply(this,arguments):h).end()})},s.scaleBy=function(r,h,g,z){s.scaleTo(r,function(){var A=this.__zoom.k,D=typeof h=="function"?h.apply(this,arguments):h;return A*D},g,z)},s.scaleTo=function(r,h,g,z){s.transform(r,function(){var A=e.apply(this,arguments),D=this.__zoom,S=g==null?i(A):typeof g=="function"?g.apply(this,arguments):g,C=D.invert(S),V=typeof h=="function"?h.apply(this,arguments):h;return n(N(w(D,V),S,C),A,a)},g,z)},s.translateBy=function(r,h,g,z){s.transform(r,function(){return n(this.__zoom.translate(typeof h=="function"?h.apply(this,arguments):h,typeof g=="function"?g.apply(this,arguments):g),e.apply(this,arguments),a)},null,z)},s.translateTo=function(r,h,g,z,A){s.transform(r,function(){var D=e.apply(this,arguments),S=this.__zoom,C=z==null?i(D):typeof z=="function"?z.apply(this,arguments):z;return n(_t.translate(C[0],C[1]).scale(S.k).translate(typeof h=="function"?-h.apply(this,arguments):-h,typeof g=="function"?-g.apply(this,arguments):-g),D,a)},z,A)};function w(r,h){return h=Math.max(u[0],Math.min(u[1],h)),h===r.k?r:new ut(h,r.x,r.y)}function N(r,h,g){var z=h[0]-g[0]*r.k,A=h[1]-g[1]*r.k;return z===r.x&&A===r.y?r:new ut(r.k,z,A)}function i(r){return[(+r[0][0]+ +r[1][0])/2,(+r[0][1]+ +r[1][1])/2]}function M(r,h,g,z){r.on("start.zoom",function(){E(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(z).end()}).tween("zoom",function(){var A=this,D=arguments,S=E(A,D).event(z),C=e.apply(A,D),V=g==null?i(C):typeof g=="function"?g.apply(A,D):g,K=Math.max(C[1][0]-C[0][0],C[1][1]-C[0][1]),Y=A.__zoom,L=typeof h=="function"?h.apply(A,D):h,U=y(Y.invert(V).concat(K/Y.k),L.invert(V).concat(K/L.k));return function(F){if(F===1)F=L;else{var q=U(F),it=K/q[2];F=new ut(it,V[0]-q[0]*it,V[1]-q[1]*it)}S.zoom(null,F)}})}function E(r,h,g){return!g&&r.__zooming||new j(r,h)}function j(r,h){this.that=r,this.args=h,this.active=0,this.sourceEvent=null,this.extent=e.apply(r,h),this.taps=0}j.prototype={event:function(r){return r&&(this.sourceEvent=r),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(r,h){return this.mouse&&r!=="mouse"&&(this.mouse[1]=h.invert(this.mouse[0])),this.touch0&&r!=="touch"&&(this.touch0[1]=h.invert(this.touch0[0])),this.touch1&&r!=="touch"&&(this.touch1[1]=h.invert(this.touch1[0])),this.that.__zoom=h,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(r){var h=$(this.that).datum();l.call(r,this.that,new be(r,{sourceEvent:this.sourceEvent,target:s,transform:this.that.__zoom,dispatch:l}),h)}};function I(r,...h){if(!t.apply(this,arguments))return;var g=E(this,h).event(r),z=this.__zoom,A=Math.max(u[0],Math.min(u[1],z.k*Math.pow(2,o.apply(this,arguments)))),D=H(r);if(g.wheel)(g.mouse[0][0]!==D[0]||g.mouse[0][1]!==D[1])&&(g.mouse[1]=z.invert(g.mouse[0]=D)),clearTimeout(g.wheel);else{if(z.k===A)return;g.mouse=[D,z.invert(D)],st(this),g.start()}tt(r),g.wheel=setTimeout(S,b),g.zoom("mouse",n(N(w(z,A),g.mouse[0],g.mouse[1]),g.extent,a));function S(){g.wheel=null,g.end()}}function _(r,...h){if(p||!t.apply(this,arguments))return;var g=r.currentTarget,z=E(this,h,!0).event(r),A=$(r.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",K,!0),D=H(r,g),S=r.clientX,C=r.clientY;bt(r.view),ct(r),z.mouse=[D,this.__zoom.invert(D)],st(this),z.start();function V(Y){if(tt(Y),!z.moved){var L=Y.clientX-S,U=Y.clientY-C;z.moved=L*L+U*U>d}z.event(Y).zoom("mouse",n(N(z.that.__zoom,z.mouse[0]=H(Y,g),z.mouse[1]),z.extent,a))}function K(Y){A.on("mousemove.zoom mouseup.zoom",null),zt(Y.view,z.moved),tt(Y),z.event(Y).end()}}function T(r,...h){if(t.apply(this,arguments)){var g=this.__zoom,z=H(r.changedTouches?r.changedTouches[0]:r,this),A=g.invert(z),D=g.k*(r.shiftKey?.5:2),S=n(N(w(g,D),z,A),e.apply(this,h),a);tt(r),m>0?$(this).transition().duration(m).call(M,S,z,r):$(this).call(s.transform,S,z,r)}}function P(r,...h){if(t.apply(this,arguments)){var g=r.touches,z=g.length,A=E(this,h,r.changedTouches.length===z).event(r),D,S,C,V;for(ct(r),S=0;S<z;++S)C=g[S],V=H(C,this),V=[V,this.__zoom.invert(V),C.identifier],A.touch0?!A.touch1&&A.touch0[2]!==V[2]&&(A.touch1=V,A.taps=0):(A.touch0=V,D=!0,A.taps=1+!!x);x&&(x=clearTimeout(x)),D&&(A.taps<2&&(k=V[0],x=setTimeout(function(){x=null},v)),st(this),A.start())}}function X(r,...h){if(this.__zooming){var g=E(this,h).event(r),z=r.changedTouches,A=z.length,D,S,C,V;for(tt(r),D=0;D<A;++D)S=z[D],C=H(S,this),g.touch0&&g.touch0[2]===S.identifier?g.touch0[0]=C:g.touch1&&g.touch1[2]===S.identifier&&(g.touch1[0]=C);if(S=g.that.__zoom,g.touch1){var K=g.touch0[0],Y=g.touch0[1],L=g.touch1[0],U=g.touch1[1],F=(F=L[0]-K[0])*F+(F=L[1]-K[1])*F,q=(q=U[0]-Y[0])*q+(q=U[1]-Y[1])*q;S=w(S,Math.sqrt(F/q)),C=[(K[0]+L[0])/2,(K[1]+L[1])/2],V=[(Y[0]+U[0])/2,(Y[1]+U[1])/2]}else if(g.touch0)C=g.touch0[0],V=g.touch0[1];else return;g.zoom("touch",n(N(S,C,V),g.extent,a))}}function B(r,...h){if(this.__zooming){var g=E(this,h).event(r),z=r.changedTouches,A=z.length,D,S;for(ct(r),p&&clearTimeout(p),p=setTimeout(function(){p=null},v),D=0;D<A;++D)S=z[D],g.touch0&&g.touch0[2]===S.identifier?delete g.touch0:g.touch1&&g.touch1[2]===S.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(S=H(S,this),Math.hypot(k[0]-S[0],k[1]-S[1])<f)){var C=$(this).on("dblclick.zoom");C&&C.apply(this,arguments)}}}return s.wheelDelta=function(r){return arguments.length?(o=typeof r=="function"?r:rt(+r),s):o},s.filter=function(r){return arguments.length?(t=typeof r=="function"?r:rt(!!r),s):t},s.touchable=function(r){return arguments.length?(c=typeof r=="function"?r:rt(!!r),s):c},s.extent=function(r){return arguments.length?(e=typeof r=="function"?r:rt([[+r[0][0],+r[0][1]],[+r[1][0],+r[1][1]]]),s):e},s.scaleExtent=function(r){return arguments.length?(u[0]=+r[0],u[1]=+r[1],s):[u[0],u[1]]},s.translateExtent=function(r){return arguments.length?(a[0][0]=+r[0][0],a[1][0]=+r[1][0],a[0][1]=+r[0][1],a[1][1]=+r[1][1],s):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},s.constrain=function(r){return arguments.length?(n=r,s):n},s.duration=function(r){return arguments.length?(m=+r,s):m},s.interpolate=function(r){return arguments.length?(y=r,s):y},s.on=function(){var r=l.on.apply(l,arguments);return r===l?s:r},s.clickDistance=function(r){return arguments.length?(d=(r=+r)*r,s):Math.sqrt(d)},s.tapDistance=function(r){return arguments.length?(f=+r,s):f},s}const Ae={setup(){const t=Q(null),e=Q(!0),n=Q(""),o=Q(!1),c=Q(null),u={nodes:[{id:"c++",name:"C++",group:"language",level:1},{id:"qt",name:"Qt框架",group:"framework",level:2},{id:"stl",name:"STL",group:"library",level:2},{id:"ai",name:"人工智能",group:"domain",level:1},{id:"ml",name:"机器学习",group:"domain",level:2},{id:"dl",name:"深度学习",group:"domain",level:2},{id:"cv",name:"计算机视觉",group:"domain",level:2},{id:"python",name:"Python",group:"language",level:2},{id:"pytorch",name:"PyTorch",group:"framework",level:3},{id:"tensorflow",name:"TensorFlow",group:"framework",level:3},{id:"interview",name:"面试准备",group:"activity",level:1},{id:"leetcode",name:"LeetCode",group:"resource",level:3},{id:"system-design",name:"系统设计",group:"topic",level:2},{id:"postgraduate",name:"计算机考研",group:"activity",level:1},{id:"ds",name:"数据结构",group:"subject",level:2},{id:"os",name:"操作系统",group:"subject",level:2},{id:"network",name:"计算机网络",group:"subject",level:2},{id:"resources",name:"学习资源",group:"resource",level:1},{id:"books",name:"推荐书籍",group:"resource",level:2},{id:"courses",name:"在线课程",group:"resource",level:2},{id:"projects",name:"项目经验",group:"experience",level:1}],links:[{source:"c++",target:"qt",value:8},{source:"c++",target:"stl",value:9},{source:"ai",target:"ml",value:10},{source:"ai",target:"dl",value:10},{source:"ai",target:"cv",value:8},{source:"ml",target:"python",value:8},{source:"dl",target:"pytorch",value:9},{source:"dl",target:"tensorflow",value:9},{source:"interview",target:"leetcode",value:10},{source:"interview",target:"system-design",value:9},{source:"interview",target:"c++",value:8},{source:"postgraduate",target:"ds",value:10},{source:"postgraduate",target:"os",value:10},{source:"postgraduate",target:"network",value:9},{source:"resources",target:"books",value:10},{source:"resources",target:"courses",value:10},{source:"resources",target:"leetcode",value:8},{source:"projects",target:"c++",value:9},{source:"projects",target:"qt",value:8},{source:"projects",target:"ai",value:7},{source:"ml",target:"projects",value:7},{source:"dl",target:"projects",value:7},{source:"postgraduate",target:"interview",value:8}]},a=Q(null),m=Q(null),y=Q(null),l=Q(null),x=Q(null);At(()=>{k()}),jt(()=>{p()});function k(){if(t.value){o.value=!0,c.value=null;try{const _=t.value,T=_.clientWidth,P=Math.max(600,window.innerHeight*.8);$(_).selectAll("svg").remove();const X=It().domain(["language","framework","library","domain","activity","resource","topic","subject","experience"]).range(["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f"]),B=$(_).append("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("width",T).attr("height",P).call(x.value=Ee().on("zoom",E)).append("g");m.value=B,a.value=we(u.nodes).force("link",he(u.links).id(h=>h.id).distance(h=>100-h.value*5)).force("charge",_e().strength(-300)).force("center",Kt(T/2,P/2)).force("collision",ce().radius(h=>b(h.level)+5)),y.value=B.append("g").attr("class","links").selectAll("line").data(u.links).enter().append("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",h=>Math.sqrt(h.value)).attr("stroke-dasharray",h=>h.value>8?"0":"5,5"),l.value=B.append("g").attr("class","nodes").selectAll("circle").data(u.nodes).enter().append("circle").attr("r",h=>b(h.level)).attr("fill",h=>X(h.group)).attr("stroke","#fff").attr("stroke-width",1.5).attr("data-id",h=>h.id).call($t().on("start",N).on("drag",i).on("end",M)).on("click",w);const r=B.append("g").attr("class","labels").selectAll("text").data(u.nodes).enter().append("text").text(h=>h.name).attr("font-size",h=>d(h.level)).attr("dx",h=>b(h.level)+5).attr("dy","0.35em").attr("fill","#333").attr("pointer-events","none");l.value.on("mouseover",function(h,g){$(this).attr("stroke","#000").attr("stroke-width",2),f(g)}).on("mouseout",function(h,g){$(this).attr("stroke","#fff").attr("stroke-width",1.5),s()}),a.value.on("tick",()=>{y.value.attr("x1",h=>h.source.x).attr("y1",h=>h.source.y).attr("x2",h=>h.target.x).attr("y2",h=>h.target.y),l.value.attr("cx",h=>h.x).attr("cy",h=>h.y),r.attr("x",h=>h.x).attr("y",h=>h.y)}),window.addEventListener("resize",v)}catch(_){console.error("知识图谱初始化失败:",_),c.value="图表初始化失败"}finally{o.value=!1}}}function p(){a.value&&a.value.stop(),window.removeEventListener("resize",v)}function v(){t.value&&k()}function b(_){return _===1?20:_===2?15:10}function d(_){return _===1?"14px":_===2?"12px":"10px"}function f(_){if(!l.value)return;l.value.attr("opacity",.2),$(`[data-id="${_.id}"]`).attr("opacity",1);const T=new Set;T.add(_.id),u.links.forEach(P=>{P.source.id===_.id&&T.add(P.target.id),P.target.id===_.id&&T.add(P.source.id)}),T.forEach(P=>{$(`[data-id="${P}"]`).attr("opacity",1)}),y.value&&y.value.attr("opacity",P=>P.source.id===_.id||P.target.id===_.id?1:.1)}function s(){l.value&&l.value.attr("opacity",1),y.value&&y.value.attr("opacity",.6)}function w(_,T){console.log(`点击了节点: ${T.name}`)}function N(_,T){!_.active&&a.value&&a.value.alphaTarget(.3).restart(),T.fx=T.x,T.fy=T.y}function i(_,T){T.fx=_.x,T.fy=_.y}function M(_,T){!_.active&&a.value&&a.value.alphaTarget(0),T.fx=null,T.fy=null}function E(_){m.value&&m.value.attr("transform",_.transform)}function j(){m.value&&m.value.transition().duration(750).attr("transform","translate(0,0) scale(1)")}function I(){a.value&&(e.value=!e.value,e.value?a.value.alpha(.3).restart():a.value.stop())}return Dt(n,_=>{if(!l.value)return;if(!_){s();return}const T=_.toLowerCase();l.value.attr("opacity",P=>P.name.toLowerCase().includes(T)?1:.2)}),{graphContainer:t,physicsEnabled:e,searchTerm:n,loading:o,error:c,resetView:j,togglePhysics:I}}},je={class:"knowledge-graph"},De={class:"graph-controls"},Se={class:"search-box"},Ie={ref:"graphContainer",class:"graph-container"},Pe={key:0,class:"graph-loading"},Ce={key:1,class:"graph-error"};function Ve(t,e,n,o,c,u){return at(),ot("div",je,[Z("div",De,[Z("button",{onClick:e[0]||(e[0]=(...a)=>o.resetView&&o.resetView(...a))},"重置视图"),Z("button",{onClick:e[1]||(e[1]=(...a)=>o.togglePhysics&&o.togglePhysics(...a))},vt(o.physicsEnabled?"暂停":"启动")+"物理模拟",1),Z("div",Se,[Nt(Z("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>o.searchTerm=a),placeholder:"搜索节点..."},null,512),[[Et,o.searchTerm]])])]),Z("div",Ie,null,512),o.loading?(at(),ot("div",Pe,"加载知识图谱中...")):o.error?(at(),ot("div",Ce,"图表加载失败: "+vt(o.error),1)):kt("",!0)])}const Re=Tt(Ae,[["render",Ve],["__scopeId","data-v-b045ab33"]]);export{Re as default};
