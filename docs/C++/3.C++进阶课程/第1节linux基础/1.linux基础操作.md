# Linux基础操作

## 共享文件夹配置
如果 `mmt` 文件夹中没有 `hgfs` 文件夹执行指令：  
`sudo mkdir hgfs`  
即可创建  

手动挂载共享文件夹：  
`sudo /usr/bin/vmhgfs-fuse .host:/ /mnt/hgfs -o subtype=vmhgfs-fuse,allow_other`  

- 手动挂载有个弊端：虚拟机关机重启之后，需要重新挂载  

### 自动挂载共享文件夹
操作步骤：  
1. `sudo vim /etc/fstab`  
2. 按下 `o`（在光标下方插入新行）  
3. 复制指令到终端：  
   `.host:/ /mnt/hgfs fuse.vmhgfs-fuse allow_other,uid=1000,gid=1000,umask=022 0 0`  
   - 粘贴方式：鼠标滚轮（鼠标中键）  
4. 按下 `esc` 键退出编辑模式  
5. 输入 `:wq` 回车保存并退出  

---

## VSCode远程连接Linux系统
**第一步：安装插件**  
- 在VSCode扩展中搜索安装插件：  
  `Remote-SSH`  

**第二步：检查SSH服务**  
- 检查SSH是否存在：  
  `which sshd`  
- 检查SSH运行状态：  
  `ps -e | grep ssh`  
  - 若指令有输出则表明服务存在  
- 若未安装SSH服务：  
  `sudo apt-get install openssh-server`  
- 若SSH未启动：  
  `sudo service sshd restart`  

**第三步：生成密钥**  
1. Windows下打开cmd执行：  
   `ssh-keygen`  
   - 连续按回车直到生成结束  
2. 密钥生成后：  
   - 复制 `C:\用户\用户名\.ssh\id_rsa.pub` 文件  
   - 粘贴到虚拟机 `~/home/用户名/.ssh/` 目录下  
     - 若Linux无 `.ssh` 文件夹：需开启显示隐藏文件并手动创建  
3. 将 `id_rsa.pub` 内容复制到 `authorized_keys` 文件  
   - 或直接重命名：`mv id_rsa.pub authorized_keys`  

**第四步：新建远程连接**  
1. 点击VSCode左侧「远程资源管理器」图标  
2. 点击右侧 `+` 号新建连接  
3. 输入：`ssh Linux用户名@Linux的IP地址` 回车  
4. 观察左下角状态：显示 `SSH:IP地址` 即连接成功  

---

## Linux常用操作
### 常用文件系统
**文件系统**：管理/组织/操作文件的软件体系  
- ext3  
- ext4  
- FAT32  
- NTFS  

### Linux文件组织
采用**树状结构**：  
- `/` : 根目录（起点）  
- `/dev` : 设备文件  
- `/lib` : 依赖库  
- `/home` : 用户家目录  

#### 路径类型
- **绝对路径**：  
  以根目录 `/` 为起点的完整路径（固定起点）  
- **相对路径**：  
  不以根目录为起点的路径（起点不固定）  

> **注意**：Linux系统中一切皆文件  

### Linux终端前缀解析
示例：`thirteen@thirteen713:~/Classcodes$`  
- `thirteen`：当前用户名  
- `@`：分隔符  
- `thirteen713`：计算机名（系统名）  
- `:`：分隔符  
- `~/Classcodes`：当前工作路径（家目录下的Classcodes）  
- `$`：普通用户标识符（`#`表示超级用户）  

### 路径符号说明
- `~`：当前用户家目录  
- `/`：根目录（系统文件起点）  
- `.`：当前目录  
- `..`：上级目录  

---

## vi/vim编辑器
Linux基础文本编辑器，支持两种模式：  

### 打开方式
- 打开空编辑器：`vi` 或 `vim`  
- 打开指定文件：`vi 文件名.扩展名`  

### 模式切换
- **默认启动**：命令模式  
- **命令模式 → 编辑模式**：  
  - `i`：光标处插入  
  - `I`：行首插入  
  - `o`：下行新建  
  - `O`：上行新建  
  - `a`：光标后追加  
  - `A`：行尾追加  
- **编辑模式 → 命令模式**：`Esc`  

> 提示：编辑模式下终端左下角显示`--插入--`标记  

### 命令模式操作
#### 保存/退出
- `:q`：退出（未修改文件时生效）  
- `:q!`：强制退出不保存  
- `:wq`：保存并退出  
- `:w`：保存  

#### 删除/修改
- `x`：删除光标处字符  
- `dd`：删除整行（保存至剪切板）  
- `ndd`：删除n行（例：`5dd`删5行）  
- `p`：粘贴到光标后  
- `P`：粘贴到光标前  
- `yy`：复制当前行  
- `nyy`：复制n行（例：`3yy`复制3行）  
- `r`：替换单个字符（先按`r`再按新字符）  
- `R`：进入连续替换模式（按`Esc`退出）  
- `u`：撤销操作  

#### 搜索
- `/搜索内容`：查找字符串  
- `n`：跳至下一个匹配项  
- `N`：跳至上一个匹配项  

#### 替换
语法：`[范围]s/目标/替换内容/[标志]`  
- **范围**：  
  - 不指定：当前行  
  - `%`：全文  
  - `2,5`：2-5行  
  - `.,+2`：当前行及后2行  
- **标志**：  
  - `g`：全局替换  
  - `i`：忽略大小写  

#### 显示行号
- `:set nu`：显示行号  

> **未命名文件操作**：  
> - 保存时指定文件名：`:w 文件名.扩展名`  
> - 创建文件：`vim 新文件名.扩展名`  

---

## 文件系统原理
### 文件结构
- **文件属性**（inode存储）：  
  - 文件名  
  - 文件大小  
  - 文件类型  
  - 唯一标识符（inode编号）  
- **文件内容**：  
  - 数据区：存储实际内容  
  - 节点区：存储inode元数据  

> 用户通过文件名访问文件 → 系统通过inode定位数据存储位置  

### 作业
熟悉 `vi/vim` 编辑器操作指令  
